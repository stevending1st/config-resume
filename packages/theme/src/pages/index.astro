---
import Awards from '../components/Awards.astro';
import Basics from '../components/Basics.astro';
import Certificates from '../components/Certificates.astro';
import Education from '../components/Education.astro';
import Interests from '../components/Interests.astro';
import Languages from '../components/Languages.astro';
import Projects from '../components/Projects.astro';
import Publications from '../components/Publications.astro';
import References from '../components/References.astro';
import Skills from '../components/Skills.astro';
import Summary from '../components/Summary.astro';
import Volunteer from '../components/Volunteer.astro';
import Work from '../components/Work.astro';
import LanguageSelector from '../components/LanguageSelector.astro';
import Layout from '../layouts/Layout.astro';

import i18nItem, { lang, supportedLanguages } from 'virtual:config-resume:i18n';
import resume from 'virtual:config-resume:resume';
import { myAddressFormatter } from '../utils/addressFormatter';

const {
  basics,
  work,
  volunteer,
  education,
  awards,
  certificates,
  publications,
  skills,
  languages,
  interests,
  references,
  projects
} = resume || {};
const { name, summary, location, ...otherBasics } = basics || {};

const addressString = myAddressFormatter(
  lang,
  location,
  i18nItem.addressForLocaleArray
);
---

<Layout title={name ? name : 'Resume'} description={summary}>
  <main class="flex w-full min-h-screen bg-slate-200 justify-center">
    <div
      class="max-lg:w-full w-[64rem] print:w-full max-sm:px-4 max-md:px-10 max-lg:px-20 px-24 max-sm:py-5 max-lg:py-20 py-20 max-sm:my-0 my-10 print:my-0 bg-white my-15 drop-shadow-xl print:drop-shadow-none border border-gray-300 print:border-none"
    >
      {
        supportedLanguages.length !== 0 && supportedLanguages.length !== 1 && (
          <div class="flex justify-end print:hidden">
            <LanguageSelector supportedLanguages={supportedLanguages} />
          </div>
        )
      }

      <div class="divide-y divide-gray-400 divide-dashed *:py-5">
        <Basics {...{ name, locationString: addressString, ...otherBasics }} />

        <Summary componentNameText={i18nItem.summary} summary={summary} />

        <Education
          componentNameText={i18nItem.education}
          education={education}
        />

        <Certificates
          componentNameText={i18nItem.certificates}
          certificates={certificates}
        />

        <Skills componentNameText={i18nItem.skills} skills={skills} />

        <Projects componentNameText={i18nItem.projects} projects={projects} />

        <Languages
          componentNameText={i18nItem.languages}
          languages={languages}
        />

        <Work componentNameText={i18nItem.work} work={work} />

        <Publications
          componentNameText={i18nItem.publications}
          publications={publications}
        />

        <Awards componentNameText={i18nItem.awards} awards={awards} />

        <Interests
          componentNameText={i18nItem.interests}
          interests={interests}
        />

        <Volunteer
          componentNameText={i18nItem.volunteer}
          volunteer={volunteer}
        />

        <References
          componentNameText={i18nItem.references}
          references={references}
        />
      </div>
    </div>
  </main>
</Layout>
